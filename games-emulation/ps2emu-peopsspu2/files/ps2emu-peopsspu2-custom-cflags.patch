--- Makefile.old	2009-03-09 22:56:16.890273800 -0400
+++ Makefile	2009-03-09 22:57:57.851667661 -0400
@@ -8,31 +8,28 @@
 all: spu2PeopsOSS
 install: all
 
-# Set to TRUE to build the ALSA support
-USEALSA = FALSE
 # Set to TRUE to disable the thread library support - helpful for some Linux distros
 NOTHREADLIB = FALSE
 
 ##############################################################################
 
-CC = gcc
-CCFLAGS1 = -fPIC -c -Wall -O3
-CCFLAGS2 = -fPIC -c -Wall -O2 -ffast-math
-CCFLAGS3 = -fPIC -c -Wall -O3 -ffast-math -fomit-frame-pointer
+CCFLAGS1 = $(CFLAGS) -fPIC -c -Wall
+CCFLAGS2 = $(CFLAGS) -fPIC -c -Wall
+CCFLAGS3 = $(CFLAGS) -fPIC -c -Wall
 
 INCLUDE =
-LINK = gcc
+LINK = $(CC)
 OBJ =   spu.o dma.o freeze.o registers.o
 LIB = -lc -lm
 
 ifeq ($(USEALSA), TRUE)
 	OBJ+= alsa.o
 	LIB+= -lasound
-	LINKFLAGS = -shared -Wl,-soname,libspu2PeopsALSA.so -o libspu2PeopsALSA.so.1.0.3
+	LINKFLAGS += -shared -Wl,-soname,libspu2PeopsALSA.so -o libspu2PeopsALSA.so.1.0.3
 	CCFLAGS3+= -DUSEALSA
 else
 	OBJ+= oss.o
-	LINKFLAGS = -shared -Wl,-soname,libspu2PeopsOSS.so.1.6 -fPIC -fomit-frame-pointer -o libspu2PeopsOSS.so.1.6
+	LINKFLAGS += -shared -Wl,-soname,libspu2PeopsOSS.so.1.6 -fPIC -fomit-frame-pointer -o libspu2PeopsOSS.so.1.6
 endif
 
 ifeq ($(NOTHREADLIB), TRUE)
